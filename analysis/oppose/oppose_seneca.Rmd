---
title: '`.oppose() method to the Senecan disputed plays'
author: "Paschalis Agapitos"
output: pdf_document
---

# Importing the libraries

```{r}
library(stylo)
```
# Setting working directory

The first step that we need to take is to set the working directory to the folder where this notebook and our dataset are saved. In our case `Analysis` is our working directory.

```{r}
setwd("../oppose/")
getwd()
```

For `.oppose()` to be applied to the texts there is no need of preprocessing. We just need to create two different corpora:
* the `primary_corpus`: it will contain the non-disputed plays of Seneca the Younger
* the `secondary_corpus`:
  + `secondary_set`: it will contain `Octavia`
  + `secondary_set1`: it will contain `Hercules Oetaeus`

```{r}
primary.corpus.sene <- load.corpus(files = "all", corpus.dir = "primary_set/",
                              encoding = "UTF-8")

secondary.corpus.oct <- load.corpus(files="all", corpus.dir = "secondary_set/",
                                    encoding = "UTF-8")

tokenized.primary.corpus <- txt.to.words.ext(primary.corpus.sene, corpus.lang = "Latin.corr", 
                                             preserve.case = F)

tokenized.secondary.o <- txt.to.words.ext(secondary.corpus.oct, corpus.lang = "Latin.corr",
                                          preserve.case = F)

```

# Remove the pronouns
It was decided to remove the pronouns, since some pronouns are connected to the genre of the text.
```{r}
prim.corpus.no.pronouns <- delete.stop.words(tokenized.primary.corpus,
                                             stop.words = stylo.pronouns(corpus.lang = "Latin.corr"))

sec.corpus.oct.no.pronouns <- delete.stop.words(tokenized.secondary.o,
                                                stop.words = stylo.pronouns(corpus.lang = "Latin.corr"))


# the list with the pronouns removed
# stylo.pronouns(corpus.lang = "Latin")
```
# Character 4-grams
## Extracting the features (character 4-grams)
The final step before proceeding to the methods is to extract the features that we want to use and add them to a table with frequencies. In our case, we want to extract character 4-grams.
```{r}
# Seneca non-disputed plays 

prim.w.1grams <- txt.to.features(prim.corpus.no.pronouns, 
                                 features = "w", 
                                 ngram.size = 1)


freq.features.prim.cor <- make.frequency.list(prim.w.1grams,
                                              head = 1500)

freqs.prim.corpus <- make.table.of.frequencies(prim.w.1grams,
                                               features = freq.features.prim.cor,
                                               relative = T)


# Octavia

sec.w.1grams.oct <- txt.to.features(sec.corpus.oct.no.pronouns,
                                    features = "w",
                                    ngram.size = 1)

freq.features.sec.corp.oct <- make.frequency.list(sec.w.1grams.oct,
                                                  head = 1500)

freqs.sec.corpus.oct <- make.table.of.frequencies(sec.w.1grams.oct,
                                                  features = freq.features.sec.corp.oct,
                                                  relative = T)

# relative=True to compute the relative frequency
```



```{r}
oct_vs_seneca = oppose(gui = T,
                       path = "../oppose/",
                       primary.corpus.dir = "primary_set/",
                       secondary.corpus.dir = "secondary_set/")

#help(oppose)
```

```{r}
# do the same for Hercules Oetaeus
secondary.corpus.her.o <- load.corpus(files="all", corpus.dir = "secondary_set1/",
                                      encoding = "UTF-8")

tokenized.secondary.her.o <- txt.to.words.ext(secondary.corpus.her.o, corpus.lang = "Latin.corr",
                                              preserve.case = F)

```

# Remove the pronouns
It was decided to remove the pronouns, since some pronouns are connected to the genre of the text.
```{r}
sec.corpus.her.o.no.pronouns <- delete.stop.words(tokenized.secondary.her.o,
                                                stop.words = stylo.pronouns(corpus.lang = "Latin.corr"))


# the list with the pronouns removed
# stylo.pronouns(corpus.lang = "Latin")
```

```{r}
# Hercules Oetaeus

sec.w.1grams.her.o <- txt.to.features(sec.corpus.her.o.no.pronouns,
                                      features = "w",
                                      ngram.size = 1)

freq.features.sec.corp.her.o <- make.frequency.list(sec.w.1grams.her.o,
                                                  head = 1500)

freqs.sec.corpus.her.o <- make.table.of.frequencies(sec.w.1grams.her.o,
                                                    features = freq.features.sec.corp.her.o,
                                                    relative = T)

# relative=True to compute the relative frequency
```



```{r}
hero_vs_seneca = oppose(gui = T,
                        path = "../oppose/",
                        primary.corpus.dir = "primary_set/",
                        secondary.corpus.dir = "secondary_set1/")
```


```{r}
# summary(oct_vs_seneca)
print(oct_vs_seneca$words.avoided.scores[1:10])
print(hero_vs_seneca$words.avoided.scores[1:10])
```